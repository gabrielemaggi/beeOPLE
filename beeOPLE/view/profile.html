<!DOCTYPE html>
<html>
  <title>profile</title>
  
  <head>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="../public/js/apikamikaze.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="..\public\css\registration.css">
    <link rel="stylesheet" href="..\public\js\registration.js">
    <link rel="stylesheet" href="..\public\css\buttons.css">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
 
  <style>
   #apesx{
    position: fixed;
  }
  #apedx{
    position: fixed;
  }
  body{
    background-image: url("../public/images/bee_cells.jpg");
    font-family: 'Indie Flower';
    padding: 50px;
  }
  li,p{
    font-size: 20px;
  }
  text.big{
    font-size: 70px; 
  }
  td{
      font-size: 20px;
  }
  td.sizeword{
      width: 200px;
  }
  table{
    background-color:rgb(255,193,7);
    border: solid rgb(255,193,7) 40px;  
  }
  
  </style>
  </head>
  <body onload="carica()">
    <div>
      <div style="text-align: center; font-size: 30px;" id="username">Welcome: <form type="text" id="username" placeholder="usename"></div>
    </div>
    
        <table align="center">
            <tr>
                <td class="sizeword">Your name is:</td> <td><input class="form-control" type="text" placeholder="Readonly input here…" id="name" readonly></td> 
            </tr>
           <tr>
                 <td class="sizeword">Your surname is:</td>
                  <td><input class="form-control" type="text" placeholder="Readonly input here…" id="surname" readonly></td>
          </tr>
       
            <tr style="height: 40px;">
            <tr>
                <td class="sizeword">Your E-MAIL is:</td> <!--INSERT HERE THE MAIL--> <td><input class="form-control" type="text" placeholder="Readonly input here…" id="email" readonly></td>
            </tr>
            <tr style="height: 40px;">
                <tr>
                    <td class="sizeword">Your city is:</td> <!--INSERT HERE THE CITY--> <td><input class="form-control" type="text" placeholder="Readonly input here…" id="city" readonly></td>
            </tr>
          </tr>
          <tr style="height: 40px;">
              <tr>
                  <td class="sizeword">Your role is:</td>
                  <td><input class="form-control" type="text" placeholder="Readonly input here…" id="role" readonly></td>
          </tr>
         
        <tr>
            <!--  'cognome' => $row["cognome"], 'usename' => $row["username"], ' --> <td></td>
        </tr>
        </table>
        <br>
        <div style="text-align:center">
          <img id="flower" src="../public/images/SUNFLOWER.png" usemap="#sunflowermap" align="center" alt="sun flower">
          <map name="sunflowermap">
              <area target="" alt="" title="" href="./allergie.html" coords="38,147,29,143,31,137,14,131,13,117,33,107,13,98,10,89,25,79,15,63,26,55,45,57,39,41,39,20,50,24,57,22,69,22,80,8,93,18,91,27,106,11,110,17,125,7,130,23,128,31,143,23,150,23,151,35,162,44,169,43,173,50,179,51,174,64,165,83,179,83,187,92,181,105,188,115,193,119,172,119,173,127,166,134,172,147,173,153,159,156,155,165,152,171,137,162,132,167,130,186,121,181,112,187,104,170,88,181,85,172,68,178,65,159,49,165,36,165" shape="poly">
          </map>
  
          <br> <h4>GO TO CHAT</h4>
      </div>

  </body>
  
  <script>
    
      $( document ).ready(function() {
        
            if(sessionStorage.getItem("key") == null){
              window.location.href = "login.html";
            } 
            else{
            richiesta("./test3.php")
            }

      });


          
      function richiesta(url){
          
        
        $.ajax({
                  type: "GET",
                  url: url + "?token=" + sessionStorage.getItem("key"),
                   // serializes the form's elements.
                  
                  success: function(data)
                  {
                   
                    var x = JSON.parse(data);

                    console.log(x);

                    document.getElementById("username").innerHTML = "Welcome: " + x.username;
                    document.getElementById("name").value = x.nome;
                    document.getElementById("surname").value = x.cognome;
                    document.getElementById("email").value = x.email;
                    document.getElementById("city").value = x.city;
                    
                    //console.log(x.ruolo)
                    switch(parseInt(x.ruolo)){
                      case 0:
                      document.getElementById("role").value = "Larva";
                      break;
                      case 1:
                      document.getElementById("role").value = "Operaia";
                      break;
                      case 2:
                      document.getElementById("role").value = "Regina";
                    }
                    
                  }
                  
              });
      }

      
  </script>
</html>



<!---- trash

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
-->